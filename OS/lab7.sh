#!/bin/bash

# Проверяем, что передан хотя бы один аргумент (имя файла)
if [ $# -lt 1 ]; then
    echo "Usage: $0 <input_file>"
    exit 1
fi

# Имя входного файла
input_file="$1"

# Проверяем, что входной файл существует
if [ ! -f "$input_file" ]; then
    echo "Ошибка: файл '$input_file' не существует."
    exit 1
fi

# Имя выходного файла
output_file="output.txt"

# Открытие входного файла на чтение с файловым дескриптором 3
exec 3< "$input_file"

# Открытие выходного файла на запись с файловым дескриптором 4
exec 4> "$output_file"

# Чтение файла построчно и запись в выходной файл
while IFS= read -r line || [[ -n "$line" ]]; do
    # Записываем строку в выходной файл
    echo "$line" >&4
done <&3

# Закрытие файловых дескрипторов
exec 3<&-
exec 4>&-

echo "Копирование завершено. Содержимое записано в '$output_file'."
